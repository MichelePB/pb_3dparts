<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>AM6</title>
    
    <link rel="icon" type="image/png" href="favicon/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="favicon/favicon.svg" />
    <link rel="shortcut icon" href="favicon/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-title" content="pb 3dparts" />
    <link rel="manifest" href="favicon/site.webmanifest" />

    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="css/style_bed.css">

    <style>
        body {
            margin: 0; padding: 0;
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(to right, #f0f2f0, #000c40);
            color: black;
        }

        .container {
            max-width: 900px; margin: 30px auto;
            padding: 20px; background: rgba(255, 255, 255, 0.95);
            border-radius: 15px; box-shadow: 0 0 15px rgba(0,0,0,0.1);
        }

        .header {
            text-align: center; padding: 20px 0;
            border-bottom: 1px solid #eee; margin-bottom: 30px;
        }

        .header h1 { font-family: 'Orbitron', sans-serif; color: #000; margin-bottom: 10px; }

        .product-container {
            display: flex; flex-wrap: wrap; gap: 30px;
            align-items: flex-start; justify-content: center; margin-bottom: 30px;
        }

        .product-image { flex: 1; min-width: 300px; text-align: center; position: sticky; top: 20px; }
        .product-image img {
            max-width: 100%; border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            cursor: pointer; transition: transform 0.3s;
        }
        .product-image img:hover { transform: scale(1.02); }

        .product-info { flex: 1; min-width: 300px; }
        .product-title { font-size: 24px; margin-bottom: 10px; color: #333; }
        .product-description { margin-bottom: 20px; line-height: 1.6; }
        .product-price { font-size: 28px; font-weight: bold; color: #2a5a9a; margin: 25px 0; }

        

        .back-arrow {
            display: inline-block; margin-bottom: 20px;
            text-decoration: none; color: #2a5a9a; font-weight: bold;
        }
        .back-arrow::before { content: "←"; margin-right: 5px; }

        /* --- LIGHTBOX STILI --- */
        .lightbox {
            display: none; position: fixed; z-index: 9999;
            top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.92); user-select: none;
            touch-action: none;
        }

        .lightbox-content {
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            text-align: center; width: 90%; max-width: 800px;
        }

        .lightbox img {
            max-height: 70vh; max-width: 100%;
            border-radius: 8px; box-shadow: 0 0 20px rgba(0,0,0,0.6);
        }

        .close-lightbox {
            position: absolute; top: 20px; right: 30px;
            color: white; font-size: 40px; font-weight: bold;
            cursor: pointer; z-index: 10001;
        }

        .nav-arrow {
            position: absolute; top: 50%; transform: translateY(-50%);
            color: white; font-size: 40px; font-weight: bold;
            cursor: pointer; padding: 15px; transition: 0.3s;
            background: rgba(0,0,0,0.1); border-radius: 5px; z-index: 10000;
        }
        .nav-arrow:hover { background: rgba(255,255,255,0.2); }
        .prev { left: 10px; }
        .next { right: 10px; }

        .dots-container { margin-top: 15px; display: flex; justify-content: center; gap: 8px; }
        .dot { height: 8px; width: 8px; background-color: rgba(255,255,255,0.3); border-radius: 50%; cursor: pointer; transition: 0.3s; }
        .dot.active { background-color: white; transform: scale(1.2); }

        .lightbox-caption { color: white; margin-top: 15px; font-size: 16px; opacity: 0.9; }
    </style>
    
</head>
<body>
    <div class="container">
        <a href="AM6.html" class="back-arrow">Torna ai prodotti</a>

        <div class="header">
            <h1>AM6</h1>
            <h2>Tappo miscelatore</h2>
        </div>

        <div class="product-container">
            <div class="product-image">
                <img src="img/Tappo_mixer_AM6 - 1.png" alt="Tappo miscelatore" onclick="openLightbox(0)">
                <p class="product-description">Tappo miscelatore in PLA con design personalizzato</p>
            </div>
            
            <div class="product-info">
                <h3 class="product-title">Caratteristiche</h3>
                <p class="product-description">Tappo miscelatore realizzato in PLA, disponibile in vari colori.</p>

                <div class="bed-options-title">Finiture Disponibili</div>
                <div class="bed-options-grid">
                    <div class="bed-item">
                        <img src="img/Bed_CF.png" alt="Carbon Fiber">
                        <h4>Carbon Fiber</h4>
                        <p>Effetto fibra di carbonio lucida</p>
                    </div>
                    <div class="bed-item">
                        <img src="img/Bed_TRI.png" alt="Triangle">
                        <h4>Triangle</h4>
                        <p>Trama geometrica a triangoli lucida</p>
                    </div>
                    <div class="bed-item">
                        <img src="img/Bed_PEI.png" alt="PEI">
                        <h4>Satin PEI</h4>
                        <p>Texture sabbiata</p>
                    </div>
                </div>

                <div class="product-price">€6,00</div>
                <div><h3>Contattaci su Instagram!</h3></div>
            </div>
        </div>
    </div>

    <div id="lightbox" class="lightbox" onclick="closeLightbox()">
        <span class="close-lightbox" onclick="closeLightbox()">&times;</span>
        
        <span class="nav-arrow prev" onclick="changeImage(-1, event)">&#10094;</span>
        <span class="nav-arrow next" onclick="changeImage(1, event)">&#10095;</span>

        <div class="lightbox-content" onclick="event.stopPropagation()">
            <img id="lightbox-img" src="" alt="">
            <p id="lightbox-caption" class="lightbox-caption"></p>
            <div id="dots-container" class="dots-container"></div>
        </div>
    </div>

    <script>
        const gallery = [
            { src: "img/Tappo_mixer_AM6 - 1.png", title: "Tappo miscelatore" },
            { src: "img/Tappo_mixer_AM6 - 2.png", title: "Tappo miscelatore" }
        ];

        let currentIndex = 0;
        let touchStartX = 0;
        let touchEndX = 0;

        function createDots() {
            const container = document.getElementById('dots-container');
            container.innerHTML = "";
            gallery.forEach((_, index) => {
                const dot = document.createElement('div');
                dot.classList.add('dot');
                dot.onclick = (e) => { e.stopPropagation(); openLightbox(index); };
                container.appendChild(dot);
            });
        }

        function openLightbox(index) {
            currentIndex = index;
            document.getElementById('lightbox').style.display = 'block';
            updateLightboxContent();
            document.body.style.overflow = 'hidden';
        }

        function closeLightbox() {
            document.getElementById('lightbox').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        function changeImage(step, event) {
            if (event) event.stopPropagation();
            currentIndex += step;
            if (currentIndex >= gallery.length) currentIndex = 0;
            if (currentIndex < 0) currentIndex = gallery.length - 1;
            updateLightboxContent();
        }

        function updateLightboxContent() {
            const img = document.getElementById('lightbox-img');
            const caption = document.getElementById('lightbox-caption');
            const dots = document.querySelectorAll('.dot');
            img.src = gallery[currentIndex].src;
            caption.textContent = gallery[currentIndex].title;
            dots.forEach((dot, i) => {
                dot.classList.toggle('active', i === currentIndex);
            });
        }

        // SWIPE
        const lightboxEl = document.getElementById('lightbox');
        lightboxEl.addEventListener('touchstart', e => { touchStartX = e.changedTouches[0].screenX; }, false);
        lightboxEl.addEventListener('touchend', e => { touchEndX = e.changedTouches[0].screenX; handleGesture(); }, false);

        function handleGesture() {
            const threshold = 50;
            if (touchEndX < touchStartX - threshold) changeImage(1);
            if (touchEndX > touchStartX + threshold) changeImage(-1);
        }

        document.onkeydown = function(evt) {
            const isVisible = document.getElementById('lightbox').style.display === 'block';
            if (isVisible) {
                if (evt.key === "Escape") closeLightbox();
                if (evt.key === "ArrowRight") changeImage(1);
                if (evt.key === "ArrowLeft") changeImage(-1);
            }
        };

        window.onload = createDots;
    </script>
</body>
</html>